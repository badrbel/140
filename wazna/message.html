<!DOCTYPE html>
<html lang="ar">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>๐ ุฑุณุงูุฉ ููุฒูู</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="container">
    <div class="message-container" id="message-box">
      <!-- ุฒุฑ ุงูููุถูุฉ ุณูุถุงู ููุง ุฏููุงููููุงู -->
      <div id="message"></div>
    </div>
  </div>

  <div class="buttons-container">
    <button class="button" onclick="refreshMessage()">ุฑุณุงูุฉ ุฌุฏูุฏุฉ ๐</button>
    <button class="button" onclick="goBack()">ุฑุฌูุน ๐</button>
  </div>

  <!-- ุงุณุชูุฑุงุฏ ุงูููู ุงููุดุชุฑู -->
  <script src="script.js"></script>

  <script>
    let currentMessage = '';

    // ุฏุงูุฉ ุชุญุฏูุซ ุงูุฑุณุงูุฉ
    function refreshMessage() {
      const newMessage = getNextMessage();
      currentMessage = newMessage;
      localStorage.setItem('randomMessage', newMessage);

      // ุชุญุฏูุซ ุฒุฑ ุงูููุถูุฉ
      updateFavoriteButton();

      // ูุชุงุจุฉ ุงูุฑุณุงูุฉ
      typeMessage(newMessage, 'message');

      // ุชุบููุฑ ุงูุฎูููุฉ
      setRandomBackground();

      // ุชุญุฏูุซ ุนุฏุงุฏ ุงูุฑุณุงุฆู
      incrementMessages();
      updateStatsDisplay();

      // ุชุฃุซูุฑ ุตูุชู
      playClickSound();

      // ูุญุต ุงูููุงุฌุฃุฉ
      checkSurprise();
    }

    // ุฏุงูุฉ ุงูุนูุฏุฉ ููุตูุญุฉ ุงูุฑุฆูุณูุฉ
    function goBack() {
      playClickSound();
      smoothTransition('index.html');
    }

    // ุชุญุฏูุซ ุฒุฑ ุงูููุถูุฉ
    function updateFavoriteButton() {
      // ุฅุฒุงูุฉ ุงูุฒุฑ ุงููุฏูู ุฅู ูุฌุฏ
      const oldBtn = document.querySelector('.favorite-btn');
      if (oldBtn) oldBtn.remove();

      // ุฅุถุงูุฉ ุงูุฒุฑ ุงูุฌุฏูุฏ
      const messageBox = document.getElementById('message-box');
      const favoriteBtn = createFavoriteButton(currentMessage);
      messageBox.appendChild(favoriteBtn);
    }

    // ุนูุฏ ุชุญููู ุงูุตูุญุฉ
    document.addEventListener('DOMContentLoaded', () => {
      const savedMessage = localStorage.getItem('randomMessage') || getNextMessage();
      currentMessage = savedMessage;

      typeMessage(savedMessage, 'message');
      setRandomBackground();

      // ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช
      createStatsDisplay();

      // ุนุฑุถ ููุชุงุญ ุงูุชุญูู ุจุงูุตูุช
      createSoundToggle();

      // ุชุญุฏูุซ ุนุฏุงุฏ ุงูุฑุณุงุฆู
      incrementMessages();
      updateStatsDisplay();

      // ุฅุถุงูุฉ ุฒุฑ ุงูููุถูุฉ
      setTimeout(() => {
        updateFavoriteButton();
      }, 500);

      // ูุญุต ุงูููุงุฌุฃุฉ
      checkSurprise();
    });
  </script>
</body>

</html>